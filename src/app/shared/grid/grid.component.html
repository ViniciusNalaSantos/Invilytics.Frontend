<table mat-table [dataSource]="dataSource" class="mat-elevation-z2">

  <!-- Selection column -->
  @if (selectable) {
    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef>
        <mat-checkbox></mat-checkbox>
      </th>
      <td mat-cell *matCellDef="let row">
        <mat-checkbox></mat-checkbox>
      </td>
    </ng-container>
  }

  <!-- Dynamic columns -->
  @for (column of columns; track column.key) {
    <ng-container 
      [matColumnDef]="column.key"
    >

      <th 
        mat-header-cell
        *matHeaderCellDef
        class="text-sm text-[#393E46] font-(family-name:--font-nunito) font-light"
      >
        {{ column.header }}
      </th>

      <td mat-cell *matCellDef="let row">
        @switch (column.type) {

          @case ('input') {
            <input matInput [value]="row[column.key]" />
          }

          @case ('checkbox') {
            <mat-checkbox [checked]="row[column.key]"></mat-checkbox>
          }

          @default {
            <span>{{ row[column.key] }}</span>
          }

        }
      </td>

    </ng-container>
  }

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

</table>
