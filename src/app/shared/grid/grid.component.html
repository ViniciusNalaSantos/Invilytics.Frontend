<div class="px-6 md:px-8 lg:px-12">
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z2">

    <!-- Dynamic columns -->
    @for (column of columns; track column.key) {
      <ng-container 
        [matColumnDef]="column.key"
      >

        <th 
          mat-header-cell
          *matHeaderCellDef
        >
          <span 
            class="text-xs md:text-sm text-[#393E46] font-(family-name:--font-nunito)"
          >
            {{ column.header }}
          </span>
        </th>

        <td mat-cell *matCellDef="let row">
          @switch (column.type) {

            @case ('currency') {
              <span [ngClass]="getCellClass(column)">{{ row[column.key] | formatValue:'currency'}}</span>
            }

            @case ('percent') {
              <span [ngClass]="getCellClass(column)">{{ row[column.key] | formatValue:'percent' }}</span>
            }

            @default {
              <span [ngClass]="getCellClass(column)">{{ row[column.key] }}</span>
            }

          }
        </td>

      </ng-container>
    }

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

  </table>
</div>